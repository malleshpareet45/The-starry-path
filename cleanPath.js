
const fs = require('fs');
const pathStr = `M-41.75,288.96c45.35,22.03,93.03,46.28,144.93,44.09,29.09-1.23,56.8-9.64,82.37-23.43,21.05-11.36,40-26.7,58.02-42.31s36.54-33.44,56.08-48.67l-7.69,5.94c18.51-14.28,38.59-26.11,60.09-35.29-3.02,1.28-6.05,2.55-9.07,3.83,23.45-9.85,48.07-16.48,73.27-19.87-3.37.45-6.73.9-10.1,1.36,24.7-3.18,49.66-3.22,74.35,0-3.37-.45-6.73-.9-10.1-1.36,23.21,3.16,45.9,9.17,67.53,18.19-3.02-1.28-6.05-2.55-9.07-3.83,61.99,26.19,111.5,73.57,170.39,105.25,33.12,17.81,68.65,30.3,106.48,31.92,43.17,1.85,86.38-12.66,122.79-35.14,42.9-26.49,78.55-64.08,125.42-84.12l-9.07,3.83c11.87-4.94,24.16-8.65,36.91-10.42-3.37.45-6.73.9-10.1,1.36,8.93-1.12,17.86-1.24,26.79-.12-3.37-.45-6.73-.9-10.1-1.36,8.22,1.14,16.16,3.3,23.83,6.44l-9.07-3.83c8.7,3.7,16.75,8.55,24.26,14.27l-7.69-5.94c11.3,8.8,21.04,19.28,29.78,30.58-1.98-2.56-3.96-5.13-5.94-7.69,11.34,14.86,20.39,30.97,29.76,47.08,10.33,17.77,22.12,34.95,35.89,50.24,15.74,17.48,34.81,30.56,56.69,39.02,22.89,8.85,48.73,7.53,72.08,1.43,24.11-6.3,46.63-17.16,71.5-20.56-3.37.45-6.73.9-10.1,1.36,23.02-3.06,46.52-3.43,69.55-.34-3.37-.45-6.73-.9-10.1-1.36,13.81,1.95,27.36,5.23,40.26,10.6l-9.07-3.83c5,2.15,9.84,4.59,14.52,7.38,17.08,10.2,42.45,4.39,51.97-13.63,9.69-18.35,4.6-41.09-13.63-51.97`;

function parsePath(d) {
    const commands = d.match(/[a-df-z][^a-df-z]*/ig);
    const result = [];
    for (const cmd of commands) {
        const type = cmd[0];
        const args = cmd.slice(1).match(/-?\d*\.?\d+/g).map(parseFloat);
        if (type.toLowerCase() === 'c' && args.length > 6) {
            for (let i = 0; i < args.length; i += 6) {
                result.push({ type, args: args.slice(i, i + 6) });
            }
        } else {
            result.push({ type, args });
        }
    }
    return result;
}

const parsed = parsePath(pathStr);
let outputStr = "";

parsed.forEach(p => {
    const { type, args } = p;
    let dx = 0;
    if (type.toLowerCase() === 'c') dx = args[4];
    else if (type.toLowerCase() === 'l') dx = args[0];
    else if (type.toLowerCase() === 's') dx = args[2];
    else if (type.toLowerCase() === 'm') dx = args[0];

    if (dx < 0 && type.toLowerCase() !== 'm') return;

    outputStr += type + args.join(',') + ' ';
});

fs.writeFileSync('cleanedPath.txt', outputStr);
